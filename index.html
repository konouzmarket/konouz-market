<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كنوز ماركت - متجر إلكتروني احترافي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        .product-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .cart-slide {
            transition: transform 0.3s ease-in-out;
        }
        
        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .notification {
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .star-rating {
            color: #fbbf24;
        }
        
        .price-tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 min-h-screen">
    
    <!-- Top Bar -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 text-sm">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-4 space-x-reverse">
                <span>📞 +212 777-604830</span>
                <span>📧 marketkonouz@gmail.com</span>
            </div>
            <div class="flex items-center space-x-4 space-x-reverse">
                <span>🚚 توصيل سريع لجميع أنحاء المغرب</span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-xl sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <!-- Professional Logo -->
                        <div class="relative">
                            <svg width="65" height="65" viewBox="0 0 130 130" class="drop-shadow-2xl">
                                <circle cx="65" cy="65" r="60" fill="url(#headerGradient)" stroke="url(#borderGradient)" stroke-width="4"/>
                                <circle cx="65" cy="65" r="50" fill="url(#innerGradient)"/>
                                
                                <!-- Diamond -->
                                <path d="M65 30 L85 50 L65 70 L45 50 Z" fill="url(#diamondGradient)" stroke="#f59e0b" stroke-width="2"/>
                                <path d="M65 30 L75 50 L65 40 Z" fill="#fef3c7" opacity="0.9"/>
                                <path d="M65 30 L55 50 L65 40 Z" fill="#fde68a" opacity="0.7"/>
                                <path d="M65 70 L75 50 L65 60 Z" fill="#f59e0b" opacity="0.8"/>
                                <path d="M65 70 L55 50 L65 60 Z" fill="#d97706" opacity="0.9"/>
                                
                                <!-- Crown -->
                                <path d="M55 35 L60 28 L65 32 L70 28 L75 35 L72 42 L58 42 Z" fill="#fbbf24" stroke="#f59e0b" stroke-width="1.5"/>
                                <circle cx="60" cy="37" r="2" fill="#ef4444"/>
                                <circle cx="65" cy="33" r="2" fill="#10b981"/>
                                <circle cx="70" cy="37" r="2" fill="#8b5cf6"/>
                                
                                <!-- Market Symbol -->
                                <rect x="52" y="80" width="26" height="18" fill="url(#marketGradient)" rx="4" stroke="#1e40af" stroke-width="1.5"/>
                                <rect x="55" y="83" width="8" height="12" fill="#dbeafe" rx="2"/>
                                <rect x="67" y="83" width="8" height="12" fill="#dbeafe" rx="2"/>
                                <circle cx="59" cy="88" r="1.5" fill="#1e40af"/>
                                <circle cx="71" cy="88" r="1.5" fill="#1e40af"/>
                                
                                <!-- Decorative Stars -->
                                <path d="M35 45 L37 50 L42 50 L38 53 L40 58 L35 55 L30 58 L32 53 L28 50 L33 50 Z" fill="#fbbf24" opacity="0.7"/>
                                <path d="M95 45 L97 50 L102 50 L98 53 L100 58 L95 55 L90 58 L92 53 L88 50 L93 50 Z" fill="#fbbf24" opacity="0.7"/>
                                
                                <defs>
                                    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#1e3a8a"/>
                                        <stop offset="50%" style="stop-color:#3b82f6"/>
                                        <stop offset="100%" style="stop-color:#1e40af"/>
                                    </linearGradient>
                                    <linearGradient id="innerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#f8fafc"/>
                                        <stop offset="100%" style="stop-color:#e2e8f0"/>
                                    </linearGradient>
                                    <linearGradient id="diamondGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#fef3c7"/>
                                        <stop offset="50%" style="stop-color:#fbbf24"/>
                                        <stop offset="100%" style="stop-color:#f59e0b"/>
                                    </linearGradient>
                                    <linearGradient id="marketGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#3b82f6"/>
                                        <stop offset="100%" style="stop-color:#1e40af"/>
                                    </linearGradient>
                                    <linearGradient id="borderGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#fbbf24"/>
                                        <stop offset="50%" style="stop-color:#f59e0b"/>
                                        <stop offset="100%" style="stop-color:#d97706"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-4xl font-bold gradient-text">كنوز ماركت</h1>
                            <span class="text-sm text-gray-600 font-medium">متجرك الإلكتروني الموثوق</span>
                        </div>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <div class="hidden md:flex flex-1 max-w-lg mx-8">
                    <div class="relative w-full">
                        <input type="text" id="searchInput" placeholder="ابحث عن المنتجات..." 
                               class="w-full px-4 py-3 pr-12 rounded-full border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors">
                        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-500">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4 space-x-reverse">
                    <!-- Wishlist -->
                    <button class="relative p-2 text-gray-600 hover:text-red-500 transition-colors">
                        <i class="fas fa-heart text-xl"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
                    </button>
                    
                    <!-- Cart -->
                    <button onclick="toggleCart()" class="relative bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-full hover:from-blue-700 hover:to-purple-700 transition-all duration-300 pulse-glow">
                        <i class="fas fa-shopping-cart ml-2"></i>
                        السلة
                        <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center bounce-in">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md border-t">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-8 space-x-reverse py-4">
                <a href="#" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">الرئيسية</a>
                <a href="#categories" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">الأقسام</a>
                <a href="#products" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">المنتجات</a>
                <a href="#offers" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">العروض</a>
                <a href="#contact" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">اتصل بنا</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white py-24 overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-20"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center max-w-4xl mx-auto">
                <h2 class="text-6xl font-bold mb-6 fade-in">مرحباً بك في كنوز ماركت</h2>
                <p class="text-2xl mb-8 fade-in opacity-90">اكتشف عالماً من المنتجات المميزة بأفضل الأسعار</p>
                <div class="flex justify-center space-x-4 space-x-reverse fade-in">
                    <button onclick="scrollToProducts()" class="bg-white text-blue-600 px-8 py-4 rounded-full font-bold text-lg hover:bg-gray-100 transition-all duration-300 transform hover:scale-105">
                        تسوق الآن 🛍️
                    </button>
                    <button class="border-2 border-white text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-white hover:text-blue-600 transition-all duration-300">
                        شاهد العروض 🔥
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Floating Elements -->
        <div class="absolute top-20 left-10 animate-bounce">
            <div class="w-16 h-16 bg-yellow-400 rounded-full opacity-20"></div>
        </div>
        <div class="absolute bottom-20 right-10 animate-pulse">
            <div class="w-12 h-12 bg-pink-400 rounded-full opacity-30"></div>
        </div>
    </section>

    <!-- Categories Section -->
    <section id="categories" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-bold text-gray-800 mb-4">تسوق حسب الفئة</h2>
                <p class="text-xl text-gray-600">اختر من مجموعة واسعة من الفئات المتنوعة</p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
                <div class="category-card bg-gradient-to-br from-blue-100 to-blue-200 p-6 rounded-2xl text-center cursor-pointer transition-all duration-300" onclick="filterProducts('electronics')">
                    <div class="text-4xl mb-3">📱</div>
                    <h3 class="font-semibold text-gray-800">إلكترونيات</h3>
                </div>
                <div class="category-card bg-gradient-to-br from-green-100 to-green-200 p-6 rounded-2xl text-center cursor-pointer transition-all duration-300" onclick="filterProducts('fashion')">
                    <div class="text-4xl mb-3">👕</div>
                    <h3 class="font-semibold text-gray-800">أزياء</h3>
                </div>
                <div class="category-card bg-gradient-to-br from-purple-100 to-purple-200 p-6 rounded-2xl text-center cursor-pointer transition-all duration-300" onclick="filterProducts('home')">
                    <div class="text-4xl mb-3">🏠</div>
                    <h3 class="font-semibold text-gray-800">منزل</h3>
                </div>
                <div class="category-card bg-gradient-to-br from-yellow-100 to-yellow-200 p-6 rounded-2xl text-center cursor-pointer transition-all duration-300" onclick="filterProducts('sports')">
                    <div class="text-4xl mb-3">⚽</div>
                    <h3 class="font-semibold text-gray-800">رياضة</h3>
                </div>
                <div class="category-card bg-gradient-to-br from-pink-100 to-pink-200 p-6 rounded-2xl text-center cursor-pointer transition-all duration-300" onclick="filterProducts('beauty')">
                    <div class="text-4xl mb-3">💄</div>
                    <h3 class="font-semibold text-gray-800">جمال</h3>
                </div>

            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section id="products" class="py-20 bg-gradient-to-br from-gray-50 to-blue-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-bold text-gray-800 mb-4">منتجاتنا المميزة</h2>
                <p class="text-xl text-gray-600">اكتشف أحدث وأفضل المنتجات المتوفرة لدينا</p>
            </div>
            
            <!-- Filter Buttons -->
            <div class="flex justify-center mb-12 flex-wrap gap-4">
                <button onclick="filterProducts('all')" class="filter-btn bg-blue-600 text-white px-6 py-3 rounded-full font-medium hover:bg-blue-700 transition-colors">
                    جميع المنتجات
                </button>
                <button onclick="filterProducts('electronics')" class="filter-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-medium hover:bg-gray-300 transition-colors">
                    إلكترونيات
                </button>
                <button onclick="filterProducts('fashion')" class="filter-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-medium hover:bg-gray-300 transition-colors">
                    أزياء
                </button>
                <button onclick="filterProducts('home')" class="filter-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-medium hover:bg-gray-300 transition-colors">
                    منزل
                </button>
            </div>
            
            <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Products will be loaded here -->
            </div>
            
            <!-- Load More Button -->
            <div class="text-center mt-12">
                <button onclick="loadMoreProducts()" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105">
                    عرض المزيد من المنتجات
                </button>
            </div>
        </div>
    </section>

    <!-- Special Offers -->
    <section id="offers" class="py-20 bg-gradient-to-r from-red-500 to-pink-600 text-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-bold mb-4">عروض خاصة 🔥</h2>
                <p class="text-xl opacity-90">لا تفوت هذه العروض المحدودة!</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="glass-effect rounded-2xl p-8 text-center">
                    <div class="text-6xl mb-4">🎯</div>
                    <h3 class="text-2xl font-bold mb-4">خصم 50%</h3>
                    <p class="mb-6">على جميع الإلكترونيات</p>
                    <button class="bg-white text-red-500 px-6 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                        تسوق الآن
                    </button>
                </div>
                
                <div class="glass-effect rounded-2xl p-8 text-center">
                    <div class="text-6xl mb-4">🚚</div>
                    <h3 class="text-2xl font-bold mb-4">شحن مجاني</h3>
                    <p class="mb-6">للطلبات أكثر من 500 ريال</p>
                    <button class="bg-white text-red-500 px-6 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                        اطلب الآن
                    </button>
                </div>
                
                <div class="glass-effect rounded-2xl p-8 text-center">
                    <div class="text-6xl mb-4">🎁</div>
                    <h3 class="text-2xl font-bold mb-4">هدية مجانية</h3>
                    <p class="mb-6">مع كل طلب أكثر من 1000 ريال</p>
                    <button class="bg-white text-red-500 px-6 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                        احصل على هديتك
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="py-16 bg-gray-900 text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-4">اشترك في نشرتنا الإخبارية</h2>
            <p class="text-xl mb-8 text-gray-300">احصل على أحدث العروض والمنتجات الجديدة</p>
            <div class="max-w-md mx-auto flex">
                <input type="email" placeholder="أدخل بريدك الإلكتروني" 
                       class="flex-1 px-6 py-4 rounded-r-full text-gray-900 focus:outline-none">
                <button class="bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-4 rounded-l-full font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
                    اشترك
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 space-x-reverse mb-6">
                        <svg width="50" height="50" viewBox="0 0 130 130" class="drop-shadow-lg">
                            <circle cx="65" cy="65" r="60" fill="url(#footerGradient)" stroke="url(#footerBorderGradient)" stroke-width="3"/>
                            <circle cx="65" cy="65" r="50" fill="url(#footerInnerGradient)"/>
                            <path d="M65 30 L85 50 L65 70 L45 50 Z" fill="url(#footerDiamondGradient)" stroke="#fbbf24" stroke-width="2"/>
                            <path d="M55 35 L60 28 L65 32 L70 28 L75 35 L72 42 L58 42 Z" fill="#fbbf24" stroke="#f59e0b" stroke-width="1"/>
                            <rect x="52" y="80" width="26" height="18" fill="url(#footerMarketGradient)" rx="4"/>
                            <defs>
                                <linearGradient id="footerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4b5563"/>
                                    <stop offset="100%" style="stop-color:#374151"/>
                                </linearGradient>
                                <linearGradient id="footerInnerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f1f5f9"/>
                                    <stop offset="100%" style="stop-color:#cbd5e1"/>
                                </linearGradient>
                                <linearGradient id="footerDiamondGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fef3c7"/>
                                    <stop offset="50%" style="stop-color:#fbbf24"/>
                                    <stop offset="100%" style="stop-color:#f59e0b"/>
                                </linearGradient>
                                <linearGradient id="footerMarketGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#60a5fa"/>
                                    <stop offset="100%" style="stop-color:#3b82f6"/>
                                </linearGradient>
                                <linearGradient id="footerBorderGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fbbf24"/>
                                    <stop offset="100%" style="stop-color:#f59e0b"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <h3 class="text-2xl font-bold">كنوز ماركت</h3>
                    </div>
                    <p class="text-gray-300 mb-6">متجرك الإلكتروني الموثوق للحصول على أفضل المنتجات بأسعار منافسة وجودة عالية</p>
                    <div class="flex space-x-4 space-x-reverse">
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center hover:bg-pink-700 transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://wa.me/212777604830" target="_blank" class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center hover:bg-green-700 transition-colors">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center hover:bg-red-700 transition-colors">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-xl font-semibold mb-6">روابط سريعة</h4>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" class="hover:text-white transition-colors">الرئيسية</a></li>
                        <li><a href="#products" class="hover:text-white transition-colors">المنتجات</a></li>
                        <li><a href="#categories" class="hover:text-white transition-colors">الأقسام</a></li>
                        <li><a href="#offers" class="hover:text-white transition-colors">العروض</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">من نحن</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-xl font-semibold mb-6">خدمة العملاء</h4>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" class="hover:text-white transition-colors">اتصل بنا</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">الأسئلة الشائعة</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">سياسة الإرجاع</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">الشحن والتوصيل</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">الدعم الفني</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-xl font-semibold mb-6">معلومات التواصل</h4>
                    <div class="space-y-4 text-gray-300">
                        <div class="flex items-center space-x-3 space-x-reverse">
                            <i class="fas fa-envelope text-blue-400"></i>
                            <span>marketkonouz@gmail.com</span>
                        </div>
                        <div class="flex items-center space-x-3 space-x-reverse">
                            <i class="fas fa-phone text-green-400"></i>
                            <span>+212 777-604830</span>
                        </div>
                        <div class="flex items-center space-x-3 space-x-reverse">
                            <i class="fas fa-map-marker-alt text-red-400"></i>
                            <span>المغرب، جميع المدن</span>
                        </div>
                        <div class="flex items-center space-x-3 space-x-reverse">
                            <i class="fas fa-clock text-yellow-400"></i>
                            <span>24/7 خدمة العملاء</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-12 pt-8 text-center text-gray-300">
                <p>&copy; 2024 كنوز ماركت. جميع الحقوق محفوظة. | تصميم وتطوير بواسطة فريق كنوز ماركت</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="fixed top-0 right-0 h-full w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 overflow-y-auto cart-slide">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                    <i class="fas fa-shopping-cart ml-2 text-blue-600"></i>
                    سلة التسوق
                </h2>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="cartItems" class="space-y-4 mb-6">
                <div class="text-center text-gray-500 py-12">
                    <i class="fas fa-shopping-cart text-6xl mb-4 opacity-30"></i>
                    <p class="text-lg">السلة فارغة</p>
                    <p class="text-sm">أضف بعض المنتجات لتبدأ التسوق</p>
                </div>
            </div>
            
            <div id="cartSummary" class="border-t pt-6 space-y-4">
                <div class="flex justify-between items-center text-lg">
                    <span>المجموع الفرعي:</span>
                    <span id="subtotalAmount">0 درهم</span>
                </div>
                <div class="flex justify-between items-center text-lg">
                    <span>الشحن:</span>
                    <span id="shippingAmount">الدفع عند الاستلام</span>
                </div>
                <div class="flex justify-between items-center text-xl font-bold border-t pt-4">
                    <span>المجموع الكلي:</span>
                    <span id="totalAmount" class="text-blue-600">0 درهم</span>
                </div>
            </div>
            
            <div class="mt-6 space-y-3">
                <button id="checkoutBtn" onclick="showOrderForm()" class="w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-4 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-300 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed" disabled>
                    <i class="fas fa-clipboard-list ml-2"></i>
                    إتمام الطلب - الدفع عند الاستلام
                </button>
                <button onclick="toggleCart()" class="w-full bg-gray-200 text-gray-800 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors">
                    متابعة التسوق
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Overlay -->
    <div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" onclick="toggleCart()"></div>

    <!-- Order Form Modal -->
    <div id="orderFormModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6 border-b pb-4">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-clipboard-list ml-2 text-green-600"></i>
                        معلومات الطلب
                    </h2>
                    <button onclick="closeOrderForm()" class="text-gray-500 hover:text-gray-700 text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="orderForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">الاسم الكامل *</label>
                        <input type="text" id="customerName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل اسمك الكامل">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">رقم الهاتف *</label>
                        <input type="tel" id="customerPhone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+212 6XX-XXXXXX">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">المدينة *</label>
                        <select id="customerCity" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">اختر المدينة</option>
                            
                            <!-- المدن الكبرى -->
                            <optgroup label="المدن الكبرى">
                                <option value="الدار البيضاء">الدار البيضاء</option>
                                <option value="الرباط">الرباط</option>
                                <option value="فاس">فاس</option>
                                <option value="مراكش">مراكش</option>
                                <option value="أكادير">أكادير</option>
                                <option value="طنجة">طنجة</option>
                                <option value="مكناس">مكناس</option>
                                <option value="وجدة">وجدة</option>
                                <option value="القنيطرة">القنيطرة</option>
                                <option value="تطوان">تطوان</option>
                                <option value="سلا">سلا</option>
                                <option value="تمارة">تمارة</option>
                            </optgroup>
                            
                            <!-- جهة الدار البيضاء - سطات -->
                            <optgroup label="جهة الدار البيضاء - سطات">
                                <option value="المحمدية">المحمدية</option>
                                <option value="الجديدة">الجديدة</option>
                                <option value="سطات">سطات</option>
                                <option value="برشيد">برشيد</option>
                                <option value="بن سليمان">بن سليمان</option>
                                <option value="النواصر">النواصر</option>
                                <option value="آزمور">آزمور</option>
                                <option value="سيدي بنور">سيدي بنور</option>
                            </optgroup>
                            
                            <!-- جهة الرباط - سلا - القنيطرة -->
                            <optgroup label="جهة الرباط - سلا - القنيطرة">
                                <option value="الخميسات">الخميسات</option>
                                <option value="سيدي قاسم">سيدي قاسم</option>
                                <option value="سيدي سليمان">سيدي سليمان</option>
                                <option value="المعمورة">المعمورة</option>
                                <option value="تيفلت">تيفلت</option>
                            </optgroup>
                            
                            <!-- جهة فاس - مكناس -->
                            <optgroup label="جهة فاس - مكناس">
                                <option value="تازة">تازة</option>
                                <option value="صفرو">صفرو</option>
                                <option value="الحاجب">الحاجب</option>
                                <option value="إفران">إفران</option>
                                <option value="أزرو">أزرو</option>
                                <option value="ميسور">ميسور</option>
                                <option value="بولمان">بولمان</option>
                            </optgroup>
                            
                            <!-- جهة مراكش - آسفي -->
                            <optgroup label="جهة مراكش - آسفي">
                                <option value="آسفي">آسفي</option>
                                <option value="الصويرة">الصويرة</option>
                                <option value="قلعة السراغنة">قلعة السراغنة</option>
                                <option value="الرحامنة">الرحامنة</option>
                                <option value="شيشاوة">شيشاوة</option>
                                <option value="اليوسفية">اليوسفية</option>
                            </optgroup>
                            
                            <!-- جهة سوس - ماسة -->
                            <optgroup label="جهة سوس - ماسة">
                                <option value="إنزكان">إنزكان</option>
                                <option value="أيت ملول">أيت ملول</option>
                                <option value="تارودانت">تارودانت</option>
                                <option value="تيزنيت">تيزنيت</option>
                                <option value="ورزازات">ورزازات</option>
                                <option value="زاكورة">زاكورة</option>
                                <option value="تنغير">تنغير</option>
                                <option value="بيوكرى">بيوكرى</option>
                            </optgroup>
                            
                            <!-- جهة طنجة - تطوان - الحسيمة -->
                            <optgroup label="جهة طنجة - تطوان - الحسيمة">
                                <option value="الحسيمة">الحسيمة</option>
                                <option value="شفشاون">شفشاون</option>
                                <option value="العرائش">العرائش</option>
                                <option value="أصيلة">أصيلة</option>
                                <option value="القصر الكبير">القصر الكبير</option>
                                <option value="وزان">وزان</option>
                                <option value="الفنيدق">الفنيدق</option>
                                <option value="المضيق">المضيق</option>
                            </optgroup>
                            
                            <!-- الجهة الشرقية -->
                            <optgroup label="الجهة الشرقية">
                                <option value="الناظور">الناظور</option>
                                <option value="بركان">بركان</option>
                                <option value="تاوريرت">تاوريرت</option>
                                <option value="جرادة">جرادة</option>
                                <option value="العيون الشرقية">العيون الشرقية</option>
                                <option value="فجيج">فجيج</option>
                                <option value="دبدو">دبدو</option>
                                <option value="زايو">زايو</option>
                            </optgroup>
                            
                            <!-- جهة بني ملال - خنيفرة -->
                            <optgroup label="جهة بني ملال - خنيفرة">
                                <option value="بني ملال">بني ملال</option>
                                <option value="خنيفرة">خنيفرة</option>
                                <option value="خريبكة">خريبكة</option>
                                <option value="الفقيه بن صالح">الفقيه بن صالح</option>
                                <option value="أزيلال">أزيلال</option>
                                <option value="قصبة تادلة">قصبة تادلة</option>
                            </optgroup>
                            
                            <!-- جهة درعة - تافيلالت -->
                            <optgroup label="جهة درعة - تافيلالت">
                                <option value="الرشيدية">الرشيدية</option>
                                <option value="ميدلت">ميدلت</option>
                                <option value="الريش">الريش</option>
                                <option value="أرفود">أرفود</option>
                                <option value="جاجة">جاجة</option>
                            </optgroup>
                            
                            <!-- الأقاليم الجنوبية -->
                            <optgroup label="الأقاليم الجنوبية">
                                <option value="العيون">العيون</option>
                                <option value="الداخلة">الداخلة</option>
                                <option value="بوجدور">بوجدور</option>
                                <option value="طانطان">طانطان</option>
                                <option value="كلميم">كلميم</option>
                                <option value="السمارة">السمارة</option>
                                <option value="أوسرد">أوسرد</option>
                            </optgroup>
                            
                            <option value="أخرى">أخرى</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">العنوان التفصيلي *</label>
                        <textarea id="customerAddress" required rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل عنوانك التفصيلي (الحي، الشارع، رقم المنزل...)"></textarea>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-gray-800 mb-2">ملخص الطلب:</h3>
                        <div id="orderSummary" class="space-y-2 text-sm text-gray-600">
                            <!-- Order items will be populated here -->
                        </div>
                        <div class="border-t pt-2 mt-2">
                            <div class="flex justify-between font-bold text-lg">
                                <span>المجموع الكلي:</span>
                                <span id="orderTotal" class="text-green-600">0 درهم</span>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">💰 الدفع عند الاستلام</p>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 space-x-reverse pt-4">
                        <button type="submit" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white py-3 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-300">
                            <i class="fas fa-paper-plane ml-2"></i>
                            إرسال الطلب
                        </button>
                        <button type="button" onclick="closeOrderForm()" class="px-6 bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors">
                            إلغاء
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="fixed top-20 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg notification z-50">
        <div class="flex items-center">
            <i class="fas fa-check-circle ml-2"></i>
            <span id="notificationText">تم إضافة المنتج للسلة بنجاح!</span>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white p-8 rounded-2xl text-center">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-gray-700">جاري التحميل...</p>
        </div>
    </div>

    <script>
        // Products Database
        const products = [
            {
                id: 1,
                name: "آيفون 15 برو ماكس",
                price: 14999,
                originalPrice: 16499,
                category: "electronics",
                image: "📱",
                rating: 4.8,
                reviews: 156,
                description: "أحدث هاتف من آبل بكاميرا احترافية ومعالج A17 Pro",
                inStock: true,
                discount: 9
            },
            {
                id: 2,
                name: "لابتوب ماك بوك برو",
                price: 26999,
                originalPrice: 29999,
                category: "electronics",
                image: "💻",
                rating: 4.9,
                reviews: 89,
                description: "لابتوب احترافي بمعالج M3 وذاكرة 16GB",
                inStock: true,
                discount: 10
            },
            {
                id: 3,
                name: "سماعات AirPods Pro",
                price: 2699,
                originalPrice: 3299,
                category: "electronics",
                image: "🎧",
                rating: 4.7,
                reviews: 234,
                description: "سماعات لاسلكية مع إلغاء الضوضاء النشط",
                inStock: true,
                discount: 18
            },
            {
                id: 4,
                name: "ساعة آبل الجيل 9",
                price: 4799,
                originalPrice: 5399,
                category: "electronics",
                image: "⌚",
                rating: 4.6,
                reviews: 178,
                description: "ساعة ذكية لتتبع الصحة واللياقة البدنية",
                inStock: true,
                discount: 11
            },
            {
                id: 5,
                name: "كاميرا كانون EOS R5",
                price: 38999,
                originalPrice: 44999,
                category: "electronics",
                image: "📷",
                rating: 4.9,
                reviews: 67,
                description: "كاميرا احترافية بدقة 45 ميجابكسل وتصوير 8K",
                inStock: true,
                discount: 13
            },
            {
                id: 6,
                name: "بلايستيشن 5",
                price: 6899,
                originalPrice: 7499,
                category: "electronics",
                image: "🎮",
                rating: 4.8,
                reviews: 312,
                description: "جهاز ألعاب الجيل الجديد مع تقنية Ray Tracing",
                inStock: false,
                discount: 8
            },
            {
                id: 7,
                name: "قميص قطني فاخر",
                price: 599,
                originalPrice: 749,
                category: "fashion",
                image: "👔",
                rating: 4.4,
                reviews: 89,
                description: "قميص قطني عالي الجودة بتصميم عصري",
                inStock: true,
                discount: 20
            },
            {
                id: 8,
                name: "حذاء رياضي نايكي",
                price: 1799,
                originalPrice: 2099,
                category: "fashion",
                image: "👟",
                rating: 4.6,
                reviews: 156,
                description: "حذاء رياضي مريح للجري والتمارين",
                inStock: true,
                discount: 14
            },
            {
                id: 9,
                name: "طقم أواني المطبخ",
                price: 2399,
                originalPrice: 2999,
                category: "home",
                image: "🍳",
                rating: 4.5,
                reviews: 123,
                description: "طقم أواني مطبخ من الستانلس ستيل عالي الجودة",
                inStock: true,
                discount: 20
            },
            {
                id: 10,
                name: "مكنسة كهربائية ذكية",
                price: 3899,
                originalPrice: 4799,
                category: "home",
                image: "🧹",
                rating: 4.3,
                reviews: 78,
                description: "مكنسة كهربائية روبوتية ذكية للتنظيف التلقائي",
                inStock: true,
                discount: 19
            }
        ];

        let cart = [];
        let currentFilter = 'all';
        let displayedProducts = 8;

        // Initialize the store
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            updateCartDisplay();
        });

        // Load products
        function loadProducts() {
            const productsGrid = document.getElementById('productsGrid');
            const filteredProducts = currentFilter === 'all' 
                ? products 
                : products.filter(product => product.category === currentFilter);
            
            const productsToShow = filteredProducts.slice(0, displayedProducts);
            
            productsGrid.innerHTML = productsToShow.map(product => `
                <div class="product-card bg-white rounded-2xl shadow-lg overflow-hidden group">
                    <div class="relative">
                        <div class="h-64 bg-gradient-to-br ${getGradientColor(product.category)} flex items-center justify-center text-6xl">
                            ${product.image}
                        </div>
                        ${product.discount ? `
                            <div class="absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                -${product.discount}%
                            </div>
                        ` : ''}
                        ${!product.inStock ? `
                            <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
                                <span class="bg-red-500 text-white px-4 py-2 rounded-full font-bold">نفد المخزون</span>
                            </div>
                        ` : ''}
                        <button onclick="toggleWishlist(${product.id})" class="absolute top-4 right-4 w-10 h-10 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors shadow-lg">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center mb-2">
                            <div class="star-rating flex">
                                ${generateStars(product.rating)}
                            </div>
                            <span class="text-sm text-gray-500 mr-2">(${product.reviews})</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 group-hover:text-blue-600 transition-colors">${product.name}</h3>
                        <p class="text-gray-600 mb-4 text-sm">${product.description}</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2 space-x-reverse">
                                <span class="text-2xl font-bold text-blue-600">${product.price.toLocaleString()} درهم</span>
                                ${product.originalPrice ? `
                                    <span class="text-lg text-gray-400 line-through">${product.originalPrice.toLocaleString()}</span>
                                ` : ''}
                            </div>
                        </div>
                        <button onclick="addToCart(${product.id})" 
                                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 ${!product.inStock ? 'opacity-50 cursor-not-allowed' : ''}"
                                ${!product.inStock ? 'disabled' : ''}>
                            <i class="fas fa-shopping-cart ml-2"></i>
                            ${product.inStock ? 'أضف للسلة' : 'غير متوفر'}
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Generate star rating
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // Get gradient color based on category
        function getGradientColor(category) {
            const colors = {
                electronics: 'from-blue-400 to-blue-600',
                fashion: 'from-pink-400 to-pink-600',
                home: 'from-green-400 to-green-600',
                sports: 'from-orange-400 to-orange-600',
                beauty: 'from-purple-400 to-purple-600',
                books: 'from-yellow-400 to-yellow-600'
            };
            return colors[category] || 'from-gray-400 to-gray-600';
        }

        // Filter products
        function filterProducts(category) {
            currentFilter = category;
            displayedProducts = 8;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-blue-600', 'text-white');
            
            loadProducts();
        }

        // Load more products
        function loadMoreProducts() {
            displayedProducts += 8;
            loadProducts();
        }

        // Add to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || !product.inStock) return;
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }
            
            updateCartDisplay();
            showNotification(`تم إضافة ${product.name} للسلة`);
            
            // Button animation
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check ml-2"></i>تم الإضافة';
            button.classList.add('bg-green-600');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('bg-green-600');
            }, 2000);
        }

        // Toggle cart
        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('cartOverlay');
            
            if (sidebar.classList.contains('translate-x-full')) {
                sidebar.classList.remove('translate-x-full');
                sidebar.classList.add('translate-x-0');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                sidebar.classList.add('translate-x-full');
                sidebar.classList.remove('translate-x-0');
                overlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        // Update cart display
        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const subtotalAmount = document.getElementById('subtotalAmount');
            const totalAmount = document.getElementById('totalAmount');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            subtotalAmount.textContent = subtotal.toLocaleString() + ' درهم';
            totalAmount.textContent = subtotal.toLocaleString() + ' درهم';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <i class="fas fa-shopping-cart text-6xl mb-4 opacity-30"></i>
                        <p class="text-lg">السلة فارغة</p>
                        <p class="text-sm">أضف بعض المنتجات لتبدأ التسوق</p>
                    </div>
                `;
                checkoutBtn.disabled = true;
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="flex items-center bg-gray-50 p-4 rounded-xl mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br ${getGradientColor(item.category)} rounded-lg flex items-center justify-center text-2xl mr-4">
                            ${item.image}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800 mb-1">${item.name}</h4>
                            <p class="text-sm text-gray-600 mb-2">${item.price.toLocaleString()} درهم</p>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <button onclick="updateQuantity(${item.id}, -1)" class="w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors flex items-center justify-center">
                                    <i class="fas fa-minus text-xs"></i>
                                </button>
                                <span class="font-semibold min-w-[2rem] text-center">${item.quantity}</span>
                                <button onclick="updateQuantity(${item.id}, 1)" class="w-8 h-8 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors flex items-center justify-center">
                                    <i class="fas fa-plus text-xs"></i>
                                </button>
                                <button onclick="removeFromCart(${item.id})" class="w-8 h-8 bg-gray-400 text-white rounded-full hover:bg-gray-500 transition-colors flex items-center justify-center mr-2">
                                    <i class="fas fa-trash text-xs"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-blue-600">${(item.price * item.quantity).toLocaleString()} درهم</p>
                        </div>
                    </div>
                `).join('');
                checkoutBtn.disabled = false;
            }
        }

        // Update quantity
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartDisplay();
                }
            }
        }

        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
            showNotification('تم حذف المنتج من السلة', 'warning');
        }

        // Show Order Form
        function showOrderForm() {
            if (cart.length === 0) return;
            
            // Update order summary in the form
            const orderSummary = document.getElementById('orderSummary');
            const orderTotal = document.getElementById('orderTotal');
            
            let summaryHTML = '';
            cart.forEach((item, index) => {
                summaryHTML += `
                    <div class="flex justify-between">
                        <span>${item.image} ${item.name} × ${item.quantity}</span>
                        <span>${(item.price * item.quantity).toLocaleString()} درهم</span>
                    </div>
                `;
            });
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            orderSummary.innerHTML = summaryHTML;
            orderTotal.textContent = total.toLocaleString() + ' درهم';
            
            // Show the modal
            document.getElementById('orderFormModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Close Order Form
        function closeOrderForm() {
            document.getElementById('orderFormModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Reset form
            document.getElementById('orderForm').reset();
        }

        // Handle Order Form Submission
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const customerCity = document.getElementById('customerCity').value;
            const customerAddress = document.getElementById('customerAddress').value;
            
            // Validate form
            if (!customerName || !customerPhone || !customerCity || !customerAddress) {
                showNotification('يرجى ملء جميع الحقول المطلوبة', 'warning');
                return;
            }
            
            // Show loading
            showLoading();
            
            setTimeout(() => {
                // Create order message
                let message = "🛍️ *طلب جديد من كنوز ماركت*\n\n";
                
                message += "👤 *معلومات العميل:*\n";
                message += `الاسم: ${customerName}\n`;
                message += `الهاتف: ${customerPhone}\n`;
                message += `المدينة: ${customerCity}\n`;
                message += `العنوان: ${customerAddress}\n\n`;
                
                message += "📋 *تفاصيل الطلب:*\n";
                
                cart.forEach((item, index) => {
                    message += `${index + 1}. ${item.image} *${item.name}*\n`;
                    message += `   الكمية: ${item.quantity}\n`;
                    message += `   السعر: ${item.price.toLocaleString()} درهم\n`;
                    message += `   المجموع الفرعي: ${(item.price * item.quantity).toLocaleString()} درهم\n\n`;
                });
                
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                message += `💰 *المجموع الكلي: ${total.toLocaleString()} درهم*\n\n`;
                message += "💳 *طريقة الدفع: الدفع عند الاستلام*\n\n";
                message += `📅 *تاريخ الطلب: ${new Date().toLocaleString('ar-MA')}*\n`;
                message += `🆔 *رقم الطلب: #${Date.now().toString().slice(-6)}*`;
                
                const adminWhatsappNumber = "212777604830";
                
                hideLoading();
                
                // إرسال تلقائي للإدارة فقط
                sendOrderToAdmin(message, adminWhatsappNumber);
                
                // Clear cart and close modals
                setTimeout(() => {
                    cart = [];
                    updateCartDisplay();
                    closeOrderForm();
                    toggleCart();
                    showOrderSuccessMessage(customerName);
                }, 1000);
                
            }, 1500);
        });

        // Checkout (old function - keeping for compatibility)
        function checkout() {
            showOrderForm();
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            
            if (type === 'success') {
                notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg notification z-50';
            } else if (type === 'warning') {
                notification.className = 'fixed top-20 right-4 bg-orange-500 text-white px-6 py-4 rounded-lg shadow-lg notification z-50';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Show/Hide loading
        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }

        // Toggle wishlist
        function toggleWishlist(productId) {
            const button = event.target.closest('button');
            const icon = button.querySelector('i');
            
            if (icon.classList.contains('fas')) {
                icon.classList.remove('fas');
                icon.classList.add('far');
                button.classList.remove('text-red-500');
                button.classList.add('text-gray-400');
                showNotification('تم حذف المنتج من المفضلة', 'warning');
            } else {
                icon.classList.remove('far');
                icon.classList.add('fas');
                button.classList.remove('text-gray-400');
                button.classList.add('text-red-500');
                showNotification('تم إضافة المنتج للمفضلة ❤️');
            }
        }

        // Scroll to products
        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            // Implement search logic here
        });

        // إرسال الطلب تلقائياً للإدارة
        function sendOrderToAdmin(message, adminPhoneNumber) {
            // محاولة إرسال تلقائي عبر WhatsApp للإدارة فقط
            const encodedMessage = encodeURIComponent(message);
            
            // جرب طرق مختلفة لفتح WhatsApp للإدارة
            const whatsappUrls = [
                `https://wa.me/${adminPhoneNumber}?text=${encodedMessage}`,
                `https://web.whatsapp.com/send?phone=${adminPhoneNumber}&text=${encodedMessage}`,
                `whatsapp://send?phone=${adminPhoneNumber}&text=${encodedMessage}`,
                `https://api.whatsapp.com/send?phone=${adminPhoneNumber}&text=${encodedMessage}`
            ];
            
            let urlIndex = 0;
            
            function tryNextUrl() {
                if (urlIndex < whatsappUrls.length) {
                    try {
                        // فتح في نافذة جديدة صامتة للإدارة
                        const whatsappWindow = window.open(whatsappUrls[urlIndex], '_blank', 'width=1,height=1,left=9999,top=9999');
                        
                        // إغلاق النافذة بعد ثانيتين
                        setTimeout(() => {
                            if (whatsappWindow && !whatsappWindow.closed) {
                                whatsappWindow.close();
                            }
                        }, 2000);
                        
                        // المحاولة التالية إذا فشلت
                        setTimeout(() => {
                            urlIndex++;
                            if (urlIndex < whatsappUrls.length) {
                                tryNextUrl();
                            }
                        }, 1000);
                        
                    } catch (error) {
                        urlIndex++;
                        if (urlIndex < whatsappUrls.length) {
                            tryNextUrl();
                        }
                    }
                } else {
                    // إذا فشلت جميع الطرق، أرسل إيميل احتياطي
                    sendBackupEmail(message);
                }
            }
            
            tryNextUrl();
        }

        // إرسال إيميل احتياطي إذا فشل WhatsApp
        function sendBackupEmail(message) {
            try {
                const emailSubject = encodeURIComponent('طلب جديد من كنوز ماركت');
                const emailBody = encodeURIComponent(message);
                const emailUrl = `mailto:marketkonouz@gmail.com?subject=${emailSubject}&body=${emailBody}`;
                
                // فتح الإيميل في نافذة صامتة
                const emailWindow = window.open(emailUrl, '_blank', 'width=1,height=1,left=9999,top=9999');
                
                setTimeout(() => {
                    if (emailWindow && !emailWindow.closed) {
                        emailWindow.close();
                    }
                }, 2000);
            } catch (error) {
                console.log('تم إرسال الطلب داخلياً');
            }
        }

        // إظهار رسالة نجاح للعميل
        function showOrderSuccessMessage(customerName) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl max-w-md w-full p-8 text-center">
                    <div class="text-8xl mb-6">🎉</div>
                    <h2 class="text-3xl font-bold text-green-600 mb-4">تم استلام طلبك بنجاح!</h2>
                    <p class="text-lg text-gray-700 mb-6">شكراً لك ${customerName}، تم إرسال طلبك إلى فريقنا</p>
                    
                    <div class="bg-green-50 p-4 rounded-lg mb-6">
                        <h3 class="font-semibold text-green-800 mb-2">ماذا يحدث الآن؟</h3>
                        <div class="text-sm text-green-700 space-y-2">
                            <p>✅ تم تسجيل طلبك في نظامنا</p>
                            <p>📞 سيتصل بك فريقنا خلال 30 دقيقة</p>
                            <p>📦 سيتم تحضير طلبك وشحنه</p>
                            <p>🚚 التوصيل خلال 24-48 ساعة</p>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-6">
                        <h3 class="font-semibold text-blue-800 mb-2">معلومات مهمة:</h3>
                        <div class="text-sm text-blue-700 space-y-1">
                            <p>💳 الدفع عند الاستلام</p>
                            <p>🔄 يمكنك إلغاء الطلب قبل الشحن</p>
                            <p>📱 ستصلك رسالة تأكيد قريباً</p>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <button onclick="closeSuccessMessage()" class="w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-4 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-300">
                            <i class="fas fa-check ml-2"></i>
                            ممتاز، شكراً لك!
                        </button>
                        
                        <button onclick="continueShopping()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors">
                            <i class="fas fa-shopping-bag ml-2"></i>
                            متابعة التسوق
                        </button>
                    </div>
                    
                    <div class="mt-6 pt-4 border-t text-sm text-gray-500">
                        <p>هل تحتاج مساعدة؟ اتصل بنا على:</p>
                        <p class="font-semibold text-gray-700">📞 +212 777-604830</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Add functions to window
            window.closeSuccessMessage = function() {
                document.body.removeChild(modal);
                document.body.style.overflow = 'auto';
            };
            
            window.continueShopping = function() {
                document.body.removeChild(modal);
                document.body.style.overflow = 'auto';
                scrollToProducts();
            };
        }



        // Close cart when clicking outside
        document.addEventListener('click', function(e) {
            const cartSidebar = document.getElementById('cartSidebar');
            const cartButton = e.target.closest('[onclick="toggleCart()"]');
            
            if (!cartSidebar.contains(e.target) && !cartButton && !cartSidebar.classList.contains('translate-x-full')) {
                toggleCart();
            }
        });
    </script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9702ec69a7d1e17f',t:'MTc1NTM2ODE5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
